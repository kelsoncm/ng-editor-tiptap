<div class="tabs-container">
  <div class="language-selector">
    <label for="language-select">{{ 'common.language' | translate }}:</label>
    <select 
      id="language-select"
      [(ngModel)]="currentLanguage"
      (change)="setLanguage(currentLanguage)"
      class="language-select">
      <option *ngFor="let lang of supportedLanguages" [value]="lang">
        {{ ('language.' + lang) | translate }}
      </option>
    </select>
  </div>

  <div class="tabs-header">
    <button
      class="tab-button"
      [class.active]="activeTab === 'form'"
      (click)="selectTab('form')">
      {{ 'app.tabs.form' | translate }}
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'html'"
      (click)="selectTab('html')">
      {{ 'app.tabs.htmlPreview' | translate }}
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'json'"
      (click)="selectTab('json')">
      {{ 'app.tabs.jsonPreview' | translate }}
    </button>
  </div>

  <div class="tabs-content">
    <!-- Aba FormulÃ¡rio -->
    <div class="tab-pane" *ngIf="activeTab === 'form'">
      <form [formGroup]="form" (ngSubmit)="submit()">
        <h2>{{ 'app.editor.heading' | translate }}</h2>

        <app-editor
          formControlName="body"
          [toolbarPreset]="'full'"
          [minHeight]="'250px'"
          [enableTableOfContents]="true"
          [readonly]="false"
          [placeholder]="'app.editor.placeholder' | translate"
          [enableHeading]="true"
          [enableBold]="true"
          [enableItalic]="true"
          [enableBalloonMenu]="true"
          [enableCode]="true"
          [characterMinimum]="50"
          [characterLimit]="1000"
          [wordMinimum]="10"
          [wordLimit]="200"
          [paragraphMinimum]="2"
          [paragraphLimit]="10"
          (jsonChange)="onJsonChange($event)"
          (focus)="onFocus()"
          [showFooter]="true"
          (blur)="onBlur()">
        </app-editor>

        <button type="submit">{{ 'common.submit' | translate }}</button>

      </form>
    </div>

    <!-- Aba Preview HTML -->
    <div class="tab-pane" *ngIf="activeTab === 'html'">
        <h3>{{ 'app.tabs.htmlPreview' | translate }}</h3>
        <div class="preview-box" [innerHTML]="form.get('body')?.value"></div>
    </div>

    <!-- Aba Preview JSON -->
    <div class="tab-pane" *ngIf="activeTab === 'json'">
      <h2>{{ 'app.tabs.jsonPreview' | translate }}</h2>
      <pre class="json-preview">{{ editorJson | json }}</pre>
    </div>
  </div>
</div>
